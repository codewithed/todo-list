(()=>{"use strict";const t=(t,e,n,a,o)=>({title:t,dueDate:e,description:n,priority:a,completedStatus:o,editTitle(t){this.title=t},editDescription(t){this.description=t},editPriority(t){this.priority=t},editDueDate(t){this.dueDate=t},editCompletedStatus(t){this.completedStatus=t}}),e=function(){this.arr=[],this.addProject=t=>{this.arr.push(t)},this.removeProject=t=>{this.arr.splice(t,1)}};function n(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t){n(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===a(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function i(t){n(1,arguments);var e=o(t);return e.setHours(0,0,0,0),e}function d(t,e){n(2,arguments);var a=i(t),o=i(e);return a.getTime()===o.getTime()}function s(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var r={};function c(){return r}function l(t,e){var a,i,d,r,l,u,m,p;n(1,arguments);var y=c(),f=s(null!==(a=null!==(i=null!==(d=null!==(r=null==e?void 0:e.weekStartsOn)&&void 0!==r?r:null==e||null===(l=e.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==d?d:y.weekStartsOn)&&void 0!==i?i:null===(m=y.locale)||void 0===m||null===(p=m.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==a?a:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=o(t),v=g.getDay(),k=(v<f?7:0)+v-f;return g.setDate(g.getDate()-k),g.setHours(0,0,0,0),g}function u(t,e,a){n(2,arguments);var o=l(t,a),i=l(e,a);return o.getTime()===i.getTime()}const m=function(t){this.name=t,this.arr=[],this.addTask=t=>{this.arr.push(t)},this.removeTask=t=>{this.arr.splice(t,1)},this.getTodayTasks=()=>{this.filter((t=>function(t){return n(1,arguments),d(t,Date.now())}(t.dueDate)))},this.getWeeklyTasks=()=>{this.arr.filter((t=>function(t,e){return n(1,arguments),u(t,Date.now(),e)}(t.dueDate)))},this.pastDueTasks=()=>{this.arr.filter((t=>function(t){return n(1,arguments),o(t).getTime()<Date.now()}(t.dueDate)))}};!function(){const n=new m("defaultProject");let a=n;const o=new e;function i(t){document.getElementById("tasklist").innerHTML="",document.getElementById("projectTitle").innerText=t}function d(t){t.forEach((t=>{const e=document.getElementById("tasklist"),n=document.createElement("button");n.classList.add("todo-item"),n.innerHTML=`<div class="left-task-panel"><i class="fa-regular fa-circle"></i><p>${t.title}</p><input type="text" class="input-task-name" data-input-task-name=""></div>\n      <div class="right-task-panel"><p id='dueDate'>${t.dueDate}</p><input type="date" name="" id="inputDueDate" class="input-date" data-input-date><i class="fa-solid fa-xmark"></i></i></div>`;const o=a.arr.length;n.setAttribute("data-index",o),e.append(n),n.addEventListener("click",c)}))}function s(){const t=document.getElementById("projectTitle").value;if(void 0===t||""===t)alert("Project name can't be empty");else{const e=document.getElementById("projectPrompt"),n=new m(t);o.addProject(n);const s=document.getElementById("userProjects"),r=document.createElement("button");r.classList.add("project-button"),r.style.id="projectButton",r.setAttribute("data-index",o.arr.length-1),r.innerHTML=`<div class="left-project-panel"><i class="fa-solid fa-list"></i><span>&nbsp${t}</span></div>\n     <div class="right-project-panel"><i class="fa-solid fa-xmark"></i></div>`,s.appendChild(r),document.getElementById("addProjectBtn").style.display="block",e.remove(),r.addEventListener("click",(t=>{a=n,i(n.name),d(a.arr),function(t){if("projectButton"===t.target.style.id){const{index:e}=t.target.dataset.index;o.removeProject(e),t.target.remove()}}(t)}))}}function r(){const t=document.getElementById("addProjectBtn");document.getElementById("projectPrompt").remove(),t.style.display="block"}function c(t){if(t.target.classList.contains("fa-xmark")||t.target.classList.contains("fa-circle")){const e=t.target.parentElement.parentElement;e.remove();const n=e.dataset.index;a.removeTask(n)}}function l(){const e=document.getElementById("todoPrompt"),n=document.getElementById("taskTitle").value;if(void 0===n||""===n||null===n)alert("Task name cannot be empty");else{const o=t(n);a.addTask(o),e.remove();const i=document.createElement("button");i.classList.add("todo-item"),i.innerHTML=`<div class="left-task-panel"><i class="fa-regular fa-circle"></i><p>${n}</p><input type="text" class="input-task-name" data-input-task-name=""></div>\n      <div class="right-task-panel"><p id='dueDate'>No Date</p><input type="date" name="" id="inputDueDate" class="input-date" data-input-date><i class="fa-solid fa-xmark"></i></i></div>`;const d=document.getElementById("tasklist"),s=a.arr.length-1;i.setAttribute("data-index",s),d.append(i),i.addEventListener("click",c),document.getElementById("addTodoBtn").style.display="block"}}function u(){document.getElementById("todoPrompt").remove(),document.getElementById("addTodoBtn").style.display="block"}document.getElementById("addProjectBtn").addEventListener("click",(function(){const t=document.createElement("div"),e=document.getElementById("userProjects");t.setAttribute("id","projectPrompt");const n=document.getElementById("addProjectBtn");t.classList.add("project-prompt"),t.innerHTML='<input type="text" value="" placeholder="project title" id=\'projectTitle\'>\n   <div><button id="add" style="background-color: rgb(123, 237, 157);">Add</button>\n   <button id="cancel" style="background-color: rgb(247, 95, 95)">Cancel</button></div>',e.append(t),n.style.display="none";const a=document.getElementById("add"),o=document.getElementById("cancel");a.addEventListener("click",s),o.addEventListener("click",r)})),document.getElementById("addTodoBtn").addEventListener("click",(function(){document.getElementById("addTodoBtn").style.display="none";const t=document.createElement("div");t.setAttribute("id","todoPrompt"),t.classList.add("project-prompt"),t.innerHTML='<input type="text" value="" placeholder="task title" id=\'taskTitle\'>\n    <div><button id="add" style="background-color: rgb(123, 237, 157);">Add</button>\n    <button id="cancel" style="background-color: rgb(247, 95, 95)">Cancel</button></div>',document.getElementById("tasklist").appendChild(t);const e=document.getElementById("add"),n=document.getElementById("cancel");e.addEventListener("click",l),n.addEventListener("click",u)})),document.getElementById("inboxBtn").addEventListener("click",(()=>{a=n,i("Inbox"),d(n.arr)})),document.getElementById("todayBtn").addEventListener("click",(()=>{i("Today"),function(){const t=[];o.arr.forEach((e=>{t.push(e.getTodayTasks())}));const e=[];t.forEach((t=>{t.forEach((t=>{e.push(t)}))})),d(e)}()})),document.getElementById("thisWeekBtn").addEventListener("click",(()=>{i("This Week"),function(){const t=[];o.arr.forEach((e=>{t.push(e.getWeeklyTasks())}));const e=[];t.forEach((t=>{t.forEach((t=>{e.push(t)}))})),d(e)}()}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxFQUFLLEdBQ3JCLElBRUoxQyxFQUFVNEMsRUFDWixDQTJCRUMsRUFBZSxHQUVuQixDQ2hQQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdGxpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1RoaXNXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNQYXN0L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL2RvbXN0dWZmLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBuZXdUb2RvID0gKHRpdGxlLCBkdWVEYXRlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGNvbXBsZXRlZFN0YXR1cykgPT4gKHtcbiAgdGl0bGUsXG4gIGR1ZURhdGUsXG4gIGRlc2NyaXB0aW9uLFxuICBwcmlvcml0eSxcbiAgY29tcGxldGVkU3RhdHVzLFxuXG4gIGVkaXRUaXRsZShuZXdUaXRsZSkge1xuICAgIHRoaXMudGl0bGUgPSBuZXdUaXRsZTtcbiAgfSxcbiAgZWRpdERlc2NyaXB0aW9uKG5ld0Rlc2MpIHtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gbmV3RGVzYztcbiAgfSxcbiAgZWRpdFByaW9yaXR5KG5ld1ByaW9yaXR5KSB7XG4gICAgdGhpcy5wcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuICB9LFxuICBlZGl0RHVlRGF0ZShuZXdEdWVEYXRlKSB7XG4gICAgdGhpcy5kdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgfSxcbiAgZWRpdENvbXBsZXRlZFN0YXR1cyhuZXdDb21wbGV0ZWRTdGF0dXMpIHtcbiAgICB0aGlzLmNvbXBsZXRlZFN0YXR1cyA9IG5ld0NvbXBsZXRlZFN0YXR1cztcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBuZXdUb2RvO1xuIiwiZnVuY3Rpb24gUHJvamVjdExpc3QoKSB7XG4gIHRoaXMuYXJyID0gW107XG5cbiAgdGhpcy5hZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICB0aGlzLmFyci5wdXNoKHByb2plY3QpO1xuICB9O1xuXG4gIHRoaXMucmVtb3ZlUHJvamVjdCA9IChpbmRleCkgPT4ge1xuICAgIHRoaXMuYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3RMaXN0O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IF90eXBlb2YoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjc3RyaW5nLWFyZ3VtZW50c1wiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwidmFyIGRlZmF1bHRPcHRpb25zID0ge307XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi4vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX3JlZjIsIF9yZWYzLCBfb3B0aW9ucyR3ZWVrU3RhcnRzT24sIF9vcHRpb25zJGxvY2FsZSwgX29wdGlvbnMkbG9jYWxlJG9wdGlvLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwsIF9kZWZhdWx0T3B0aW9ucyRsb2NhbDI7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSB0b0ludGVnZXIoKF9yZWYgPSAoX3JlZjIgPSAoX3JlZjMgPSAoX29wdGlvbnMkd2Vla1N0YXJ0c09uID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX29wdGlvbnMkd2Vla1N0YXJ0c09uICE9PSB2b2lkIDAgPyBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlJG9wdGlvID0gX29wdGlvbnMkbG9jYWxlLm9wdGlvbnMpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkbG9jYWxlJG9wdGlvLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMiAhPT0gdm9pZCAwID8gX3JlZjIgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsID0gZGVmYXVsdE9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID0gX2RlZmF1bHRPcHRpb25zJGxvY2FsLm9wdGlvbnMpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmICE9PSB2b2lkIDAgPyBfcmVmIDogMCk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEod2Vla1N0YXJ0c09uID49IDAgJiYgd2Vla1N0YXJ0c09uIDw9IDYpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBvcHRpb25zKTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iLCJpbXBvcnQge1xuICBpc1RvZGF5LCBpc1RoaXNXZWVrLCBpc1Bhc3QsXG59IGZyb20gJ2RhdGUtZm5zJztcblxuLy8gcHJvamVjdCBmYWN0b3J5IGZ1bmN0aW9uXG5mdW5jdGlvbiBQcm9qZWN0KHByb2plY3ROYW1lKSB7XG4gIHRoaXMubmFtZSA9IHByb2plY3ROYW1lO1xuICB0aGlzLmFyciA9IFtdO1xuICB0aGlzLmFkZFRhc2sgPSAodG9kbykgPT4ge1xuICAgIHRoaXMuYXJyLnB1c2godG9kbyk7XG4gIH07XG4gIHRoaXMucmVtb3ZlVGFzayA9IChpbmRleCkgPT4ge1xuICAgIHRoaXMuYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH07XG4gIHRoaXMuZ2V0VG9kYXlUYXNrcyA9ICgpID0+IHtcbiAgICB0aGlzLmZpbHRlcigodGFzaykgPT4gaXNUb2RheSh0YXNrLmR1ZURhdGUpKTtcbiAgfTtcbiAgdGhpcy5nZXRXZWVrbHlUYXNrcyA9ICgpID0+IHtcbiAgICB0aGlzLmFyci5maWx0ZXIoKHRhc2spID0+IGlzVGhpc1dlZWsodGFzay5kdWVEYXRlKSk7XG4gIH07XG4gIHRoaXMucGFzdER1ZVRhc2tzID0gKCkgPT4ge1xuICAgIHRoaXMuYXJyLmZpbHRlcigodGFzaykgPT4gaXNQYXN0KHRhc2suZHVlRGF0ZSkpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0O1xuIiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IGlzU2FtZVdlZWsgZnJvbSBcIi4uL2lzU2FtZVdlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyBpbiB0aGlzIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCwgaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQgYW5kIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5XG4gKiAvLyBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUaGlzV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1Bhc3RcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHBhc3Q/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHBhc3Q/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoZSBwYXN0XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDIgSnVseSAyMDE0IGluIHRoZSBwYXN0P1xuICogY29uc3QgcmVzdWx0ID0gaXNQYXN0KG5ldyBEYXRlKDIwMTQsIDYsIDIpKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXN0KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIHRvRGF0ZShkaXJ0eURhdGUpLmdldFRpbWUoKSA8IERhdGUubm93KCk7XG59IiwiaW1wb3J0IFRvZG8gZnJvbSAnLi9Ub2RvJztcbmltcG9ydCBQcm9qZWN0TGlzdCBmcm9tICcuL3Byb2plY3RsaXN0JztcbmltcG9ydCBQcm9qZWN0IGZyb20gJy4vcHJvamVjdCc7XG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkVWkoKSB7XG4gIC8vIGNyZWF0ZSBkZWZhdWx0IG9iamVjdHNcbiAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdCgnZGVmYXVsdFByb2plY3QnKTtcbiAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gZGVmYXVsdFByb2plY3Q7XG4gIGNvbnN0IHByb2plY3RMaXN0ID0gbmV3IFByb2plY3RMaXN0KCk7XG5cbiAgLy8gY3JlYXRlcyBwcm9qZWN0UHJvbXB0IGFuZCBhcHBlbmRzIGl0IHRvIHNjcmVlblxuICBmdW5jdGlvbiBwcm9tcHRQcm9qZWN0KCkge1xuICAgIGNvbnN0IHByb2plY3RQcm9tcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB1c2VyUHJvamVjdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlclByb2plY3RzJyk7XG4gICAgcHJvamVjdFByb21wdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Byb2plY3RQcm9tcHQnKTtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFByb2plY3RCdG4nKTtcbiAgICBwcm9qZWN0UHJvbXB0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtcHJvbXB0Jyk7XG4gICAgcHJvamVjdFByb21wdC5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJcIiBwbGFjZWhvbGRlcj1cInByb2plY3QgdGl0bGVcIiBpZD0ncHJvamVjdFRpdGxlJz5cbiAgIDxkaXY+PGJ1dHRvbiBpZD1cImFkZFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiKDEyMywgMjM3LCAxNTcpO1wiPkFkZDwvYnV0dG9uPlxuICAgPGJ1dHRvbiBpZD1cImNhbmNlbFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NywgOTUsIDk1KVwiPkNhbmNlbDwvYnV0dG9uPjwvZGl2PmA7XG4gICAgdXNlclByb2plY3RzLmFwcGVuZChwcm9qZWN0UHJvbXB0KTtcbiAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBhZGQgb3IgY2FuY2VsIGJ1dHRvbnNcbiAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkJyk7XG4gICAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbCcpO1xuXG4gICAgYWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUHJvamVjdCk7XG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlUHJvamVjdFByb21wdCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93UHJvakluRG9tKHByb2plY3ROYW1lKSB7XG4gICAgY29uc3QgdG9kb1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza2xpc3QnKTtcbiAgICB0b2RvU2VjdGlvbi5pbm5lckhUTUwgPSAnJztcbiAgICBjb25zdCBwcm9qdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFRpdGxlJyk7XG4gICAgcHJvanRpdGxlLmlubmVyVGV4dCA9IHByb2plY3ROYW1lO1xuICB9XG5cbiAgLy8gZGVsZXRlcyBhIHByb2plY3RcbiAgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChlKSB7XG4gICAgaWYgKGUudGFyZ2V0LnN0eWxlLmlkID09PSAncHJvamVjdEJ1dHRvbicpIHtcbiAgICAgIGNvbnN0IHsgaW5kZXggfSA9IGUudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG4gICAgICBwcm9qZWN0TGlzdC5yZW1vdmVQcm9qZWN0KGluZGV4KTtcbiAgICAgIGUudGFyZ2V0LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGxvYWRzIHRvZG9zIG9mIGEgcHJvamVjdFxuICBmdW5jdGlvbiBsb2FkVG9kb3MoYXJyKSB7XG4gICAgYXJyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIC8vIGNyZWF0ZSB0b2RvIGNvbXBvbmVudFxuICAgICAgY29uc3QgdG9kb1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza2xpc3QnKTtcbiAgICAgIGNvbnN0IHRvZG9JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICB0b2RvSXRlbS5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0nKTtcbiAgICAgIHRvZG9JdGVtLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibGVmdC10YXNrLXBhbmVsXCI+PGkgY2xhc3M9XCJmYS1yZWd1bGFyIGZhLWNpcmNsZVwiPjwvaT48cD4ke2VsZW1lbnQudGl0bGV9PC9wPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wdXQtdGFzay1uYW1lXCIgZGF0YS1pbnB1dC10YXNrLW5hbWU9XCJcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyaWdodC10YXNrLXBhbmVsXCI+PHAgaWQ9J2R1ZURhdGUnPiR7ZWxlbWVudC5kdWVEYXRlfTwvcD48aW5wdXQgdHlwZT1cImRhdGVcIiBuYW1lPVwiXCIgaWQ9XCJpbnB1dER1ZURhdGVcIiBjbGFzcz1cImlucHV0LWRhdGVcIiBkYXRhLWlucHV0LWRhdGU+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS14bWFya1wiPjwvaT48L2k+PC9kaXY+YDtcbiAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudFByb2plY3QuYXJyLmxlbmd0aDtcbiAgICAgIHRvZG9JdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGluZGV4KTtcbiAgICAgIHRvZG9TZWN0aW9uLmFwcGVuZCh0b2RvSXRlbSk7XG4gICAgICB0b2RvSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZVRvZG8pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gY3JlYXRlcyBuZXcgcHJvamVjdCBmcm9tIHByb2plY3RQcm9tcHRcbiAgZnVuY3Rpb24gYWRkUHJvamVjdCgpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0VGl0bGUnKS52YWx1ZTtcbiAgICBpZiAodGl0bGUgPT09IHVuZGVmaW5lZCB8fCB0aXRsZSA9PT0gJycpIHtcbiAgICAgIGFsZXJ0KFwiUHJvamVjdCBuYW1lIGNhbid0IGJlIGVtcHR5XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9qZWN0UHJvbXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RQcm9tcHQnKTtcbiAgICAgIGNvbnN0IG5ld1Byb2ogPSBuZXcgUHJvamVjdCh0aXRsZSk7XG4gICAgICBwcm9qZWN0TGlzdC5hZGRQcm9qZWN0KG5ld1Byb2opO1xuXG4gICAgICAvLyBjcmVhdGUgcHJvamVjdCBidXR0b25cbiAgICAgIGNvbnN0IHVzZXJQcm9qZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyUHJvamVjdHMnKTtcbiAgICAgIGNvbnN0IHByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIHByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1idXR0b24nKTtcbiAgICAgIHByb2plY3RCdXR0b24uc3R5bGUuaWQgPSAncHJvamVjdEJ1dHRvbic7XG4gICAgICBwcm9qZWN0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIHByb2plY3RMaXN0LmFyci5sZW5ndGggLSAxKTtcbiAgICAgIHByb2plY3RCdXR0b24uaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJsZWZ0LXByb2plY3QtcGFuZWxcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLWxpc3RcIj48L2k+PHNwYW4+Jm5ic3Ake3RpdGxlfTwvc3Bhbj48L2Rpdj5cbiAgICAgPGRpdiBjbGFzcz1cInJpZ2h0LXByb2plY3QtcGFuZWxcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXhtYXJrXCI+PC9pPjwvZGl2PmA7XG4gICAgICB1c2VyUHJvamVjdHMuYXBwZW5kQ2hpbGQocHJvamVjdEJ1dHRvbik7XG4gICAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFByb2plY3RCdG4nKTtcblxuICAgICAgYWRkUHJvamVjdEJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIHByb2plY3RQcm9tcHQucmVtb3ZlKCk7XG5cbiAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgIHByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjdXJyZW50UHJvamVjdCA9IG5ld1Byb2o7XG4gICAgICAgIHNob3dQcm9qSW5Eb20obmV3UHJvai5uYW1lKTtcbiAgICAgICAgbG9hZFRvZG9zKGN1cnJlbnRQcm9qZWN0LmFycik7XG4gICAgICAgIGRlbGV0ZVByb2plY3QoZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyByZW1vdmVzIHByb2plY3QgcHJvbXB0XG4gIGZ1bmN0aW9uIHJlbW92ZVByb2plY3RQcm9tcHQoKSB7XG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRQcm9qZWN0QnRuJyk7XG4gICAgY29uc3QgcHJvamVjdFByb21wdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0UHJvbXB0Jyk7XG4gICAgcHJvamVjdFByb21wdC5yZW1vdmUoKTtcbiAgICBhZGRQcm9qZWN0QnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9XG5cbiAgLy8gQUREIEZVTkNUSU9OUyBGT1IgR0VUVElORyBUT0RPIElURU1TXG5cbiAgZnVuY3Rpb24gcHJvbXB0VG9kbygpIHtcbiAgICAvLyBjcmVhdGUgdG9kbyBwcm9tcHQgY29tcG9uZW50XG4gICAgY29uc3QgYWRkVG9kb0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvQnRuJyk7XG4gICAgYWRkVG9kb0J0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGNvbnN0IHRvZG9Qcm9tcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0b2RvUHJvbXB0LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9kb1Byb21wdCcpO1xuICAgIHRvZG9Qcm9tcHQuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1wcm9tcHQnKTtcbiAgICB0b2RvUHJvbXB0LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIHBsYWNlaG9sZGVyPVwidGFzayB0aXRsZVwiIGlkPSd0YXNrVGl0bGUnPlxuICAgIDxkaXY+PGJ1dHRvbiBpZD1cImFkZFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiKDEyMywgMjM3LCAxNTcpO1wiPkFkZDwvYnV0dG9uPlxuICAgIDxidXR0b24gaWQ9XCJjYW5jZWxcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHJnYigyNDcsIDk1LCA5NSlcIj5DYW5jZWw8L2J1dHRvbj48L2Rpdj5gO1xuICAgIGNvbnN0IHRvZG9TZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tsaXN0Jyk7XG4gICAgdG9kb1NlY3Rpb24uYXBwZW5kQ2hpbGQodG9kb1Byb21wdCk7XG5cbiAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkJyk7XG4gICAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbCcpO1xuXG4gICAgYWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVG9kbyk7XG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlVG9kb1Byb21wdCk7XG4gIH1cblxuICAvLyBkZWxldGVzIHRvZG8gdGFza1xuICBmdW5jdGlvbiBkZWxldGVUb2RvKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS14bWFyaycpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmEtY2lyY2xlJykpIHtcbiAgICAgIC8vIHJlbW92ZSB0b2RvIGNvbXBvbmVudFxuICAgICAgY29uc3QgdG9kbyA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgIHRvZG8ucmVtb3ZlKCk7XG4gICAgICAvLyByZW1vdmUgdGhlIGNvcnJlc3BvbmRpbmcgdG9kbyBvYmplY3RcbiAgICAgIGNvbnN0IG51bSA9IHRvZG8uZGF0YXNldC5pbmRleDtcbiAgICAgIGN1cnJlbnRQcm9qZWN0LnJlbW92ZVRhc2sobnVtKTtcbiAgICB9XG4gIH1cblxuICAvLyBhZGQgYSB0b2RvIHRhc2sgdG8gdGhlIGN1cnJlbnQgcHJvamVjdFxuICBmdW5jdGlvbiBhZGRUb2RvKCkge1xuICAgIGNvbnN0IHRvZG9Qcm9tcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kb1Byb21wdCcpO1xuICAgIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tUaXRsZScpLnZhbHVlO1xuICAgIGlmICh0YXNrTmFtZSA9PT0gdW5kZWZpbmVkIHx8IHRhc2tOYW1lID09PSAnJyB8fCB0YXNrTmFtZSA9PT0gbnVsbCkge1xuICAgICAgYWxlcnQoJ1Rhc2sgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY3JlYXRlIHRvZG8gb2JqZWN0XG4gICAgICBjb25zdCB0b2RvID0gVG9kbyh0YXNrTmFtZSk7XG4gICAgICBjdXJyZW50UHJvamVjdC5hZGRUYXNrKHRvZG8pO1xuICAgICAgdG9kb1Byb21wdC5yZW1vdmUoKTtcblxuICAgICAgLy8gY3JlYXRlIHRvZG8gY29tcG9uZW50XG4gICAgICBjb25zdCB0b2RvSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgdG9kb0l0ZW0uY2xhc3NMaXN0LmFkZCgndG9kby1pdGVtJyk7XG4gICAgICB0b2RvSXRlbS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImxlZnQtdGFzay1wYW5lbFwiPjxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1jaXJjbGVcIj48L2k+PHA+JHt0YXNrTmFtZX08L3A+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbnB1dC10YXNrLW5hbWVcIiBkYXRhLWlucHV0LXRhc2stbmFtZT1cIlwiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0LXRhc2stcGFuZWxcIj48cCBpZD0nZHVlRGF0ZSc+Tm8gRGF0ZTwvcD48aW5wdXQgdHlwZT1cImRhdGVcIiBuYW1lPVwiXCIgaWQ9XCJpbnB1dER1ZURhdGVcIiBjbGFzcz1cImlucHV0LWRhdGVcIiBkYXRhLWlucHV0LWRhdGU+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS14bWFya1wiPjwvaT48L2k+PC9kaXY+YDtcbiAgICAgIGNvbnN0IHRvZG9TZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tsaXN0Jyk7XG4gICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRQcm9qZWN0LmFyci5sZW5ndGggLSAxO1xuICAgICAgdG9kb0l0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaW5kZXgpO1xuICAgICAgdG9kb1NlY3Rpb24uYXBwZW5kKHRvZG9JdGVtKTtcbiAgICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlVG9kbyk7XG4gICAgICBjb25zdCBhZGRUb2RvQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRvZG9CdG4nKTtcbiAgICAgIGFkZFRvZG9CdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlVG9kb1Byb21wdCgpIHtcbiAgICBjb25zdCB0b2RvUHJvbXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9Qcm9tcHQnKTtcbiAgICB0b2RvUHJvbXB0LnJlbW92ZSgpO1xuICAgIGNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVG9kb0J0bicpO1xuICAgIGFkZFRvZG9CdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cblxuICAvLyBnZXQgdGhlIHRvZG8gdGFza3MgaW4gaW5ib3hcbiAgZnVuY3Rpb24gZ2V0SW5ib3hUYXNrcygpIHtcbiAgICBsb2FkVG9kb3MoZGVmYXVsdFByb2plY3QuYXJyKTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgdG9kbyB0YXNrcyBvZiB0aGUgZGF5XG4gIGZ1bmN0aW9uIGdldERheXNUYXNrcygpIHtcbiAgICAvLyBnZXQgZWFjaCBwcm9qZWN0cyB0b2RheSB0YXNrc1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIHByb2plY3RMaXN0LmFyci5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgICBidWZmZXIucHVzaChsaXN0LmdldFRvZGF5VGFza3MoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBzcGxpdCBhbGwgYXJyYXlzIGluIGJ1ZmZlciBpbnRvIGluZGl2aWR1YWwgaXRlbVxuICAgIGNvbnN0IHRvZGF5VGFza3MgPSBbXTtcbiAgICBidWZmZXIuZm9yRWFjaCgoYXJyKSA9PiB7XG4gICAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICB0b2RheVRhc2tzLnB1c2goaXRlbSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBsb2FkVG9kb3ModG9kYXlUYXNrcyk7XG4gIH1cblxuICAvLyBmdW5jdGlvbiBnZXQgdGhlIHRvZG8gdGFza3Mgb2YgdGhlIHdlZWtcbiAgZnVuY3Rpb24gZ2V0V2Vla3NUYXNrcygpIHtcbiAgICAvLyBnZXQgZWFjaCBwcm9qZWN0cyB0b2RheSB0YXNrc1xuICAgIGNvbnN0IGJ1ZmZlciA9IFtdO1xuICAgIHByb2plY3RMaXN0LmFyci5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgICBidWZmZXIucHVzaChsaXN0LmdldFdlZWtseVRhc2tzKCkpO1xuICAgIH0pO1xuXG4gICAgLy8gc3BsaXQgYWxsIGFycmF5cyBpbiBidWZmZXIgaW50byBpbmRpdmlkdWFsIGl0ZW1cbiAgICBjb25zdCB3ZWVrc1Rhc2tzID0gW107XG4gICAgYnVmZmVyLmZvckVhY2goKGFycikgPT4ge1xuICAgICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgd2Vla3NUYXNrcy5wdXNoKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgbG9hZFRvZG9zKHdlZWtzVGFza3MpO1xuICB9XG5cbiAgLy8gRlVOQ1RJT05TIEZPUiBFRElUSU5HIFRPRE8gSVRFTVNcblxuICAvLyBBREQgRVZFTlQgTElTVEVORVJTXG4gIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkUHJvamVjdEJ0bicpO1xuICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJvbXB0UHJvamVjdCk7XG5cbiAgY29uc3QgYWRkVG9kb0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvQnRuJyk7XG4gIGFkZFRvZG9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcm9tcHRUb2RvKTtcblxuICBjb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmJveEJ0bicpO1xuICBpbmJveEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjdXJyZW50UHJvamVjdCA9IGRlZmF1bHRQcm9qZWN0O1xuICAgIHNob3dQcm9qSW5Eb20oJ0luYm94Jyk7XG4gICAgZ2V0SW5ib3hUYXNrcygpO1xuICB9KTtcblxuICBjb25zdCB0b2RheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RheUJ0bicpO1xuICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzaG93UHJvakluRG9tKCdUb2RheScpO1xuICAgIGdldERheXNUYXNrcygpO1xuICB9KTtcblxuICBjb25zdCB0aGlzV2Vla0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGlzV2Vla0J0bicpO1xuICB0aGlzV2Vla0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzaG93UHJvakluRG9tKCdUaGlzIFdlZWsnKTtcbiAgICBnZXRXZWVrc1Rhc2tzKCk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IGxvYWRVaSBmcm9tICcuL21vZHVsZXMvZG9tc3R1ZmYnO1xuXG5sb2FkVWkoKTtcbiJdLCJuYW1lcyI6WyJ0aXRsZSIsImR1ZURhdGUiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiY29tcGxldGVkU3RhdHVzIiwiZWRpdFRpdGxlIiwibmV3VGl0bGUiLCJ0aGlzIiwiZWRpdERlc2NyaXB0aW9uIiwibmV3RGVzYyIsImVkaXRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZWRpdER1ZURhdGUiLCJuZXdEdWVEYXRlIiwiZWRpdENvbXBsZXRlZFN0YXR1cyIsIm5ld0NvbXBsZXRlZFN0YXR1cyIsImFyciIsImFkZFByb2plY3QiLCJwcm9qZWN0IiwicHVzaCIsInJlbW92ZVByb2plY3QiLCJpbmRleCIsInNwbGljZSIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwibG9jYWxlIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJwcm9qZWN0TmFtZSIsIm5hbWUiLCJhZGRUYXNrIiwidG9kbyIsInJlbW92ZVRhc2siLCJnZXRUb2RheVRhc2tzIiwiZmlsdGVyIiwidGFzayIsIm5vdyIsImlzVG9kYXkiLCJnZXRXZWVrbHlUYXNrcyIsImlzVGhpc1dlZWsiLCJwYXN0RHVlVGFza3MiLCJpc1Bhc3QiLCJkZWZhdWx0UHJvamVjdCIsImN1cnJlbnRQcm9qZWN0IiwicHJvamVjdExpc3QiLCJzaG93UHJvakluRG9tIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImlubmVyVGV4dCIsImxvYWRUb2RvcyIsImZvckVhY2giLCJlbGVtZW50IiwidG9kb1NlY3Rpb24iLCJ0b2RvSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlVG9kbyIsInZhbHVlIiwidW5kZWZpbmVkIiwiYWxlcnQiLCJwcm9qZWN0UHJvbXB0IiwibmV3UHJvaiIsInVzZXJQcm9qZWN0cyIsInByb2plY3RCdXR0b24iLCJzdHlsZSIsImlkIiwiYXBwZW5kQ2hpbGQiLCJkaXNwbGF5IiwicmVtb3ZlIiwiZSIsInRhcmdldCIsImRhdGFzZXQiLCJkZWxldGVQcm9qZWN0IiwicmVtb3ZlUHJvamVjdFByb21wdCIsImFkZFByb2plY3RCdG4iLCJjb250YWlucyIsInBhcmVudEVsZW1lbnQiLCJudW0iLCJhZGRUb2RvIiwidG9kb1Byb21wdCIsInRhc2tOYW1lIiwiVG9kbyIsInJlbW92ZVRvZG9Qcm9tcHQiLCJjYW5jZWwiLCJidWZmZXIiLCJsaXN0IiwidG9kYXlUYXNrcyIsIml0ZW0iLCJnZXREYXlzVGFza3MiLCJ3ZWVrc1Rhc2tzIiwiZ2V0V2Vla3NUYXNrcyIsImxvYWRVaSJdLCJzb3VyY2VSb290IjoiIn0=