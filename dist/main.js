(()=>{"use strict";const t=(t,e,n,o,a)=>({title:t,dueDate:e,description:n,priority:o,completedStatus:a,editTitle(t){this.title=t},editDescription(t){this.description=t},editPriority(t){this.priority=t},editDueDate(t){this.dueDate=t},editCompletedStatus(t){this.completedStatus=t}});function e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){e(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||"object"===n(t)&&"[object Date]"===o?new Date(t.getTime()):"number"==typeof t||"[object Number]"===o?new Date(t):("string"!=typeof t&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function a(t){e(1,arguments);var n=o(t);return n.setHours(0,0,0,0),n}function i(t,n){e(2,arguments);var o=a(t),i=a(n);return o.getTime()===i.getTime()}function s(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var r={};function d(){return r}function c(t,n){var a,i,r,c,l,u,m,p;e(1,arguments);var y=d(),f=s(null!==(a=null!==(i=null!==(r=null!==(c=null==n?void 0:n.weekStartsOn)&&void 0!==c?c:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:y.weekStartsOn)&&void 0!==i?i:null===(m=y.locale)||void 0===m||null===(p=m.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==a?a:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=o(t),v=g.getDay(),b=(v<f?7:0)+v-f;return g.setDate(g.getDate()-b),g.setHours(0,0,0,0),g}function l(t,n,o){e(2,arguments);var a=c(t,o),i=c(n,o);return a.getTime()===i.getTime()}const u=function(t){this.name=t,this.arr=[],this.addTask=t=>{this.arr.push(t)},this.removeTask=t=>{this.arr.splice(t,1)},this.getTodayTasks=()=>{this.filter((t=>function(t){return e(1,arguments),i(t,Date.now())}(t.dueDate)))},this.getWeeklyTasks=()=>{this.arr.filter((t=>function(t,n){return e(1,arguments),l(t,Date.now(),n)}(t.dueDate)))},this.pastDueTasks=()=>{this.arr.filter((t=>function(t){return e(1,arguments),o(t).getTime()<Date.now()}(t.dueDate)))}};function m(t,e){localStorage.setItem(t,JSON.stringify(e))}function p(t){return JSON.parse(localStorage.getItem(t))}!function(){const e=p("defaultProject")||new u("defaultProject");let n=e;const o=p("projectList")||[];function a(t,e,a){const i=document.getElementById("tasklist"),s=document.createElement("button");s.classList.add("todo-item"),s.innerHTML=`<div class="left-task-panel"><i class="fa-regular fa-circle"></i><p class="todo-title">${t}</p><input type="text" class="input-task-name" data-input-task-name=""></div>\n    <div class="right-task-panel"><p class='due-date'>${e}</p><input type="date" name="" id="inputDueDate" class="input-date" data-input-date><i class="fa-solid fa-xmark"></i></i></div>`,s.setAttribute("data-index",a),i.append(s),s.addEventListener("click",(t=>{!function(t){if(t.target.classList.contains("fa-xmark")){const e=t.target.parentElement.parentElement,a=e.dataset.index;n.arr.splice(a,1),e.remove(),m(n.name,n),m("projectList",o)}}(t)})),s.addEventListener("click",(t=>{!function(t){if(t.target.classList.contains("todo-title")||t.target.classList.contains("due-date")){const e=t.target;e.style.display="none";const a=t.target.parentElement.querySelector("input");a.classList.add("active"),document.addEventListener("keyup",(t=>{if("Enter"===t.key){const t=a.value;if(""===t||void 0===t)alert("Value cannot be empty");else{a.classList.remove("active"),e.style.display="block";const i=e.parentElement.parentElement.dataset;e.innerText=t,e.classList.contains("todo-title")&&n.arr[i].editTitle(t),e.classList.contains("due-date")&&n.arr[i].editDueDate(t),m(n.name,n),m("projectList",o)}}}))}}(t)}))}function i(t){let e=0;t.forEach((t=>{a(t.title,t.dueDate,e),e+=1}))}function s(t){document.getElementById("tasklist").innerHTML="",document.getElementById("projectTitle").innerText=t}function r(t,e){const a=document.getElementById("userProjects"),r=document.createElement("button");r.classList.add("project-button"),r.style.id="projectButton",r.setAttribute("data-index",e),r.innerHTML=`<div class="left-project-panel"><i class="fa-solid fa-list"></i><span>&nbsp${t}</span></div>\n     <div class="right-project-panel"><i class="fa-solid fa-xmark"></i></div>`,a.appendChild(r),document.getElementById("addProjectBtn").style.display="block",r.addEventListener("click",(t=>{n=p(o[e].name),function(t){if(t.target.classList.contains("fa-xmark")){const n=t.target.parentElement.parentElement,a=n.dataset.index;e=o[a].name,localStorage.removeItem(e),o.splice(a,1),n.remove(),t.stopPropagation()}var e}(t),s(n.name),i(n.arr)}))}function d(){const t=document.getElementById("addProjectBtn");document.getElementById("projectPrompt").remove(),t.style.display="block"}function c(){document.getElementById("todoPrompt").remove(),document.getElementById("addTodoBtn").style.display="block"}function l(){const e=document.getElementById("todoPrompt"),o=document.getElementById("taskTitle").value;if(void 0===o||""===o||null===o)alert("Task name cannot be empty");else{const i=t(o);n.arr.push(i),e.remove(),a(i.title,i.dueDate,n.arr.length-1),document.getElementById("addTodoBtn").style.display="block",m(n.name,n)}}document.getElementById("addProjectBtn").addEventListener("click",(function(){const t=document.createElement("div"),e=document.getElementById("userProjects");t.setAttribute("id","projectPrompt");const n=document.getElementById("addProjectBtn");t.classList.add("project-prompt"),t.innerHTML='<input type="text" value="" placeholder="project title" id=\'projectTitle\'>\n   <div><button id="add" style="background-color: rgb(123, 237, 157);">Add</button>\n   <button id="cancel" style="background-color: rgb(247, 95, 95)">Cancel</button></div>',e.append(t),n.style.display="none";const a=document.getElementById("add"),i=document.getElementById("cancel");a.addEventListener("click",(()=>{const t=document.getElementById("projectTitle").value;void 0!==t&&""!==t||alert("Project name can't be empty"),function(t){const e=new u(t);o.push(e),m(e.name,e),m("projectList",o)}(t),r(t,o.length),d()})),i.addEventListener("click",d)})),document.getElementById("addTodoBtn").addEventListener("click",(function(){document.getElementById("addTodoBtn").style.display="none";const t=document.createElement("div");t.setAttribute("id","todoPrompt"),t.classList.add("project-prompt"),t.innerHTML='<input type="text" value="" placeholder="task title" id=\'taskTitle\'>\n    <div><button id="add" style="background-color: rgb(123, 237, 157);">Add</button>\n    <button id="cancel" style="background-color: rgb(247, 95, 95)">Cancel</button></div>',document.getElementById("tasklist").appendChild(t);const e=document.getElementById("add"),n=document.getElementById("cancel");e.addEventListener("click",l),n.addEventListener("click",c)})),document.getElementById("inboxBtn").addEventListener("click",(()=>{s("Inbox"),n=e,i(e.arr)})),s("Inbox"),n=e,i(e.arr),o.forEach((t=>{let e=0;r(t.name,e),e+=1}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hDUSxpQkFBaUIsU0F6QjVCLFdBRXFCVCxTQUFTQyxlQUFlLGNBQ2hDa0IsTUFBTUMsUUFBVSxPQUMzQixNQUFNNEIsRUFBYWhELFNBQVNHLGNBQWMsT0FDMUM2QyxFQUFXekMsYUFBYSxLQUFNLGNBQzlCeUMsRUFBVzVDLFVBQVVDLElBQUksa0JBQ3pCMkMsRUFBVzFDLFVBQVkseVBBR0hOLFNBQVNDLGVBQWUsWUFDaENzQyxZQUFZUyxHQUV4QixNQUFNM0MsRUFBTUwsU0FBU0MsZUFBZSxPQUM5Qm1ELEVBQVNwRCxTQUFTQyxlQUFlLFVBRXZDSSxFQUFJSSxpQkFBaUIsUUFBU3NDLEdBQzlCSyxFQUFPM0MsaUJBQWlCLFFBQVNxQyxFQUNuQyxJQVNpQjlDLFNBQVNDLGVBQWUsWUFDaENRLGlCQUFpQixTQUFTLEtBQ2pDeUIsRUFBYyxTQUNkdEMsRUFBaUJELEVBQ2pCbUMsRUFBVW5DLEVBQWV6QixJQUFJLElBSS9CZ0UsRUFBYyxTQUNkdEMsRUFBaUJELEVBQ2pCbUMsRUFBVW5DLEVBQWV6QixLQUV6QjJCLEVBQVltQyxTQUFTdUIsSUFDbkIsSUFBSXhCLEVBQVUsRUFDZEksRUFBb0JvQixFQUFLdEYsS0FBTThELEdBQy9CQSxHQUFXLENBQUMsR0FFaEIsQ0NuUEF5QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvVG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1Bhc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9kb21zdHVmZi5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbmV3VG9kbyA9ICh0aXRsZSwgZHVlRGF0ZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBjb21wbGV0ZWRTdGF0dXMpID0+ICh7XG4gIHRpdGxlLFxuICBkdWVEYXRlLFxuICBkZXNjcmlwdGlvbixcbiAgcHJpb3JpdHksXG4gIGNvbXBsZXRlZFN0YXR1cyxcblxuICBlZGl0VGl0bGUobmV3VGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gbmV3VGl0bGU7XG4gIH0sXG4gIGVkaXREZXNjcmlwdGlvbihuZXdEZXNjKSB7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IG5ld0Rlc2M7XG4gIH0sXG4gIGVkaXRQcmlvcml0eShuZXdQcmlvcml0eSkge1xuICAgIHRoaXMucHJpb3JpdHkgPSBuZXdQcmlvcml0eTtcbiAgfSxcbiAgZWRpdER1ZURhdGUobmV3RHVlRGF0ZSkge1xuICAgIHRoaXMuZHVlRGF0ZSA9IG5ld0R1ZURhdGU7XG4gIH0sXG4gIGVkaXRDb21wbGV0ZWRTdGF0dXMobmV3Q29tcGxldGVkU3RhdHVzKSB7XG4gICAgdGhpcy5jb21wbGV0ZWRTdGF0dXMgPSBuZXdDb21wbGV0ZWRTdGF0dXM7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbmV3VG9kbztcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCBfdHlwZW9mKGFyZ3VtZW50KSA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI3N0cmluZy1hcmd1bWVudHNcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZURheShkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVSaWdodCk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZEYXkuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mRGF5LmdldFRpbWUoKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsInZhciBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMobmV3T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IG5ld09wdGlvbnM7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4uL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgdmFyIF9yZWYsIF9yZWYyLCBfcmVmMywgX29wdGlvbnMkd2Vla1N0YXJ0c09uLCBfb3B0aW9ucyRsb2NhbGUsIF9vcHRpb25zJGxvY2FsZSRvcHRpbywgX2RlZmF1bHRPcHRpb25zJGxvY2FsLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyO1xuXG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gdG9JbnRlZ2VyKChfcmVmID0gKF9yZWYyID0gKF9yZWYzID0gKF9vcHRpb25zJHdlZWtTdGFydHNPbiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9vcHRpb25zJHdlZWtTdGFydHNPbiAhPT0gdm9pZCAwID8gX29wdGlvbnMkd2Vla1N0YXJ0c09uIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9IF9vcHRpb25zJGxvY2FsZS5vcHRpb25zKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGxvY2FsZSRvcHRpby53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6IGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjIgIT09IHZvaWQgMCA/IF9yZWYyIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9IF9kZWZhdWx0T3B0aW9ucyRsb2NhbC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IDApOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDEgSmFudWFyeSAyMDE0IGFuZCAxIEphbnVhcnkgMjAxNSBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlTGVmdCwgb3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHtcbiAgaXNUb2RheSwgaXNUaGlzV2VlaywgaXNQYXN0LFxufSBmcm9tICdkYXRlLWZucyc7XG5cbi8vIHByb2plY3QgZmFjdG9yeSBmdW5jdGlvblxuZnVuY3Rpb24gUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICB0aGlzLm5hbWUgPSBwcm9qZWN0TmFtZTtcbiAgdGhpcy5hcnIgPSBbXTtcbiAgdGhpcy5hZGRUYXNrID0gKHRvZG8pID0+IHtcbiAgICB0aGlzLmFyci5wdXNoKHRvZG8pO1xuICB9O1xuICB0aGlzLnJlbW92ZVRhc2sgPSAoaW5kZXgpID0+IHtcbiAgICB0aGlzLmFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICB9O1xuICB0aGlzLmdldFRvZGF5VGFza3MgPSAoKSA9PiB7XG4gICAgdGhpcy5maWx0ZXIoKHRhc2spID0+IGlzVG9kYXkodGFzay5kdWVEYXRlKSk7XG4gIH07XG4gIHRoaXMuZ2V0V2Vla2x5VGFza3MgPSAoKSA9PiB7XG4gICAgdGhpcy5hcnIuZmlsdGVyKCh0YXNrKSA9PiBpc1RoaXNXZWVrKHRhc2suZHVlRGF0ZSkpO1xuICB9O1xuICB0aGlzLnBhc3REdWVUYXNrcyA9ICgpID0+IHtcbiAgICB0aGlzLmFyci5maWx0ZXIoKHRhc2spID0+IGlzUGFzdCh0YXNrLmR1ZURhdGUpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdDtcbiIsImltcG9ydCBpc1NhbWVEYXkgZnJvbSBcIi4uL2lzU2FtZURheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNUb2RheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB0b2RheT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSB0b2RheT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdG9kYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNUb2RheShuZXcgRGF0ZSgyMDE0LCA5LCA2LCAxNCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RvZGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZURheShkaXJ0eURhdGUsIERhdGUubm93KCkpO1xufSIsImltcG9ydCBpc1NhbWVXZWVrIGZyb20gXCIuLi9pc1NhbWVXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzVGhpc1dlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqIEBwdXJlIGZhbHNlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0IGFuZCB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheVxuICogLy8gaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGhpc1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lV2VlayhkaXJ0eURhdGUsIERhdGUubm93KCksIG9wdGlvbnMpO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNQYXN0XG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBwYXN0P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBwYXN0P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyBpbiB0aGUgcGFzdFxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyAyIEp1bHkgMjAxNCBpbiB0aGUgcGFzdD9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzUGFzdChuZXcgRGF0ZSgyMDE0LCA2LCAyKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGFzdChkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiB0b0RhdGUoZGlydHlEYXRlKS5nZXRUaW1lKCkgPCBEYXRlLm5vdygpO1xufSIsIi8vIFNhdmVzIGFuIEl0ZW0gdG8gTG9jYWwgU3RvcmFnZVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVJdGVtKGl0ZW1OYW1lLCBpdGVtT2JqZWN0KSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGl0ZW1OYW1lLCBKU09OLnN0cmluZ2lmeShpdGVtT2JqZWN0KSk7XG59XG5cbi8vIEdldHMgYW4gSXRlbSBmcm9tIGxvY2FsIHN0b3JhZ2VcbmV4cG9ydCBmdW5jdGlvbiBnZXRJdGVtKGl0ZW1OYW1lKSB7XG4gIHJldHVybiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpdGVtTmFtZSkpKTtcbn1cblxuLy8gcmVtb3ZlcyBhbiBJdGVtIGZyb20gbG9jYWwgc3RvcmFnZVxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaXRlbU5hbWUpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oaXRlbU5hbWUpO1xufVxuIiwiaW1wb3J0IFRvZG8gZnJvbSAnLi9Ub2RvJztcbmltcG9ydCBQcm9qZWN0IGZyb20gJy4vcHJvamVjdCc7XG5pbXBvcnQgeyBzYXZlSXRlbSwgZ2V0SXRlbSwgZGVsZXRlSXRlbSB9IGZyb20gJy4vc3RvcmFnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxvYWRVaSgpIHtcbiAgLy8gY3JlYXRlIGRlZmF1bHQgb2JqZWN0c1xuICBjb25zdCBkZWZhdWx0UHJvamVjdCA9IGdldEl0ZW0oJ2RlZmF1bHRQcm9qZWN0JykgfHwgbmV3IFByb2plY3QoJ2RlZmF1bHRQcm9qZWN0Jyk7XG4gIGxldCBjdXJyZW50UHJvamVjdCA9IGRlZmF1bHRQcm9qZWN0O1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IGdldEl0ZW0oJ3Byb2plY3RMaXN0JykgfHwgW107XG5cbiAgLy8gY3JlYXRlcyBuZXcgcHJvamVjdCBmcm9tIHByb2plY3RQcm9tcHRcbiAgZnVuY3Rpb24gYWRkUHJvamVjdCh0aXRsZSkge1xuICAgIGNvbnN0IG5ld1Byb2ogPSBuZXcgUHJvamVjdCh0aXRsZSk7XG4gICAgcHJvamVjdExpc3QucHVzaChuZXdQcm9qKTtcbiAgICBzYXZlSXRlbShuZXdQcm9qLm5hbWUsIG5ld1Byb2opO1xuICAgIHNhdmVJdGVtKCdwcm9qZWN0TGlzdCcsIHByb2plY3RMaXN0KTtcbiAgfVxuXG4gIC8vIGRlbGV0ZXMgYSBwcm9qZWN0XG4gIGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZhLXhtYXJrJykpIHtcbiAgICAgIGNvbnN0IHByb2plY3RCdG4gPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICBjb25zdCBudW0gPSBwcm9qZWN0QnRuLmRhdGFzZXQuaW5kZXg7XG4gICAgICBkZWxldGVJdGVtKHByb2plY3RMaXN0W251bV0ubmFtZSk7XG4gICAgICBwcm9qZWN0TGlzdC5zcGxpY2UobnVtLCAxKTtcbiAgICAgIHByb2plY3RCdG4ucmVtb3ZlKCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHVwZGF0ZXMgYSB0b2RvIGl0ZW1cbiAgZnVuY3Rpb24gdXBkYXRlVG9kbyhlKSB7XG4gICAgLy8gY2hlY2tzIGZvciB0aGUgY29ycmVjdCB0YXJnZXRcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2RvLXRpdGxlJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkdWUtZGF0ZScpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0O1xuICAgICAgdmFsdWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgLy8gbWFrZSBpbnB1dCBlbGVtZW50IHZpc2libGVcbiAgICAgIGNvbnN0IGlucHV0SXRlbSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcbiAgICAgIGlucHV0SXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgLy8gbGlzdGVuIGZvciBlbnRlciBldmVudFxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRJdGVtLnZhbHVlO1xuICAgICAgICAgIGlmIChpbnB1dCA9PT0gJycgfHwgaW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYWxlcnQoJ1ZhbHVlIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB2YWx1ZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWUucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQ7XG4gICAgICAgICAgICB2YWx1ZS5pbm5lclRleHQgPSBpbnB1dDtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHRvZG8gaXRlbSB3aXRoIG5ldyBkYXRhXG4gICAgICAgICAgICBpZiAodmFsdWUuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b2RvLXRpdGxlJykpIHtcbiAgICAgICAgICAgICAgY3VycmVudFByb2plY3QuYXJyW2luZGV4XS5lZGl0VGl0bGUoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmNsYXNzTGlzdC5jb250YWlucygnZHVlLWRhdGUnKSkge1xuICAgICAgICAgICAgICBjdXJyZW50UHJvamVjdC5hcnJbaW5kZXhdLmVkaXREdWVEYXRlKGlucHV0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2F2ZSB0aGUgY3VycmVudCBwcm9qZWN0XG4gICAgICAgICAgICBzYXZlSXRlbShjdXJyZW50UHJvamVjdC5uYW1lLCBjdXJyZW50UHJvamVjdCk7XG4gICAgICAgICAgICBzYXZlSXRlbSgncHJvamVjdExpc3QnLCBwcm9qZWN0TGlzdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBkZWxldGVzIHRvZG8gdGFza1xuICBmdW5jdGlvbiBkZWxldGVUb2RvKGUpIHtcbiAgICAvLyByZW1vdmUgdG9kbyBjb21wb25lbnRcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYS14bWFyaycpKSB7XG4gICAgICBjb25zdCB0b2RvID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgLy8gcmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIHRvZG8gb2JqZWN0XG4gICAgICBjb25zdCBudW0gPSB0b2RvLmRhdGFzZXQuaW5kZXg7XG4gICAgICBjdXJyZW50UHJvamVjdC5hcnIuc3BsaWNlKG51bSwgMSk7XG4gICAgICB0b2RvLnJlbW92ZSgpO1xuICAgICAgc2F2ZUl0ZW0oY3VycmVudFByb2plY3QubmFtZSwgY3VycmVudFByb2plY3QpO1xuICAgICAgc2F2ZUl0ZW0oJ3Byb2plY3RMaXN0JywgcHJvamVjdExpc3QpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNyZWF0ZSB0b2RvIGNvbXBvbmVudFxuICBmdW5jdGlvbiBjcmVhdGVUb2RvQ29tcG9uZW50KHRpdGxlLCBkYXRlLCBpbmRleCkge1xuICAgIGNvbnN0IHRvZG9TZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tsaXN0Jyk7XG4gICAgY29uc3QgdG9kb0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICB0b2RvSXRlbS5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0nKTtcbiAgICB0b2RvSXRlbS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImxlZnQtdGFzay1wYW5lbFwiPjxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1jaXJjbGVcIj48L2k+PHAgY2xhc3M9XCJ0b2RvLXRpdGxlXCI+JHt0aXRsZX08L3A+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbnB1dC10YXNrLW5hbWVcIiBkYXRhLWlucHV0LXRhc2stbmFtZT1cIlwiPjwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJyaWdodC10YXNrLXBhbmVsXCI+PHAgY2xhc3M9J2R1ZS1kYXRlJz4ke2RhdGV9PC9wPjxpbnB1dCB0eXBlPVwiZGF0ZVwiIG5hbWU9XCJcIiBpZD1cImlucHV0RHVlRGF0ZVwiIGNsYXNzPVwiaW5wdXQtZGF0ZVwiIGRhdGEtaW5wdXQtZGF0ZT48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXhtYXJrXCI+PC9pPjwvaT48L2Rpdj5gO1xuICAgIHRvZG9JdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGluZGV4KTtcbiAgICB0b2RvU2VjdGlvbi5hcHBlbmQodG9kb0l0ZW0pO1xuICAgIHRvZG9JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgZGVsZXRlVG9kbyhlKTsgfSk7XG4gICAgdG9kb0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyB1cGRhdGVUb2RvKGUpOyB9KTtcbiAgfVxuXG4gIC8vIGxvYWRzIHRvZG9zIG9mIGEgcHJvamVjdFxuICBmdW5jdGlvbiBsb2FkVG9kb3MoYXJyKSB7XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGFyci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjcmVhdGVUb2RvQ29tcG9uZW50KGVsZW1lbnQudGl0bGUsIGVsZW1lbnQuZHVlRGF0ZSwgY291bnRlcik7XG4gICAgICBjb3VudGVyICs9IDE7XG4gICAgfSk7XG4gIH1cblxuICAvLyBzaG93cyBjdXJyZW50IHByb2plY3QgdGl0bGUgaW4gdGhlIHRvZG8gc2VjdGlvblxuICBmdW5jdGlvbiBzaG93UHJvakluRG9tKHByb2plY3ROYW1lKSB7XG4gICAgY29uc3QgdG9kb1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza2xpc3QnKTtcbiAgICB0b2RvU2VjdGlvbi5pbm5lckhUTUwgPSAnJztcbiAgICBjb25zdCBwcm9qdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFRpdGxlJyk7XG4gICAgcHJvanRpdGxlLmlubmVyVGV4dCA9IHByb2plY3ROYW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdEJ1dHRvbih0aXRsZSwgaWQpIHtcbiAgICAvLyBjcmVhdGUgcHJvamVjdCBidXR0b25cbiAgICBjb25zdCB1c2VyUHJvamVjdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlclByb2plY3RzJyk7XG4gICAgY29uc3QgcHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHByb2plY3RCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1idXR0b24nKTtcbiAgICBwcm9qZWN0QnV0dG9uLnN0eWxlLmlkID0gJ3Byb2plY3RCdXR0b24nO1xuICAgIHByb2plY3RCdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaWQpO1xuICAgIHByb2plY3RCdXR0b24uaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJsZWZ0LXByb2plY3QtcGFuZWxcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLWxpc3RcIj48L2k+PHNwYW4+Jm5ic3Ake3RpdGxlfTwvc3Bhbj48L2Rpdj5cbiAgICAgPGRpdiBjbGFzcz1cInJpZ2h0LXByb2plY3QtcGFuZWxcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXhtYXJrXCI+PC9pPjwvZGl2PmA7XG4gICAgdXNlclByb2plY3RzLmFwcGVuZENoaWxkKHByb2plY3RCdXR0b24pO1xuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkUHJvamVjdEJ0bicpO1xuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgcHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBjdXJyZW50UHJvamVjdCA9IGdldEl0ZW0ocHJvamVjdExpc3RbaWRdLm5hbWUpO1xuICAgICAgZGVsZXRlUHJvamVjdChlKTtcbiAgICAgIHNob3dQcm9qSW5Eb20oY3VycmVudFByb2plY3QubmFtZSk7XG4gICAgICBsb2FkVG9kb3MoY3VycmVudFByb2plY3QuYXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHJlbW92ZXMgcHJvamVjdCBwcm9tcHRcbiAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdFByb21wdCgpIHtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFByb2plY3RCdG4nKTtcbiAgICBjb25zdCBwcm9qZWN0UHJvbXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RQcm9tcHQnKTtcbiAgICBwcm9qZWN0UHJvbXB0LnJlbW92ZSgpO1xuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cblxuICAvLyBjcmVhdGVzIHByb2plY3RQcm9tcHQgYW5kIGFwcGVuZHMgaXQgdG8gc2NyZWVuXG4gIGZ1bmN0aW9uIHByb21wdFByb2plY3QoKSB7XG4gICAgY29uc3QgcHJvamVjdFByb21wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHVzZXJQcm9qZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyUHJvamVjdHMnKTtcbiAgICBwcm9qZWN0UHJvbXB0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdFByb21wdCcpO1xuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkUHJvamVjdEJ0bicpO1xuICAgIHByb2plY3RQcm9tcHQuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1wcm9tcHQnKTtcbiAgICBwcm9qZWN0UHJvbXB0LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIHBsYWNlaG9sZGVyPVwicHJvamVjdCB0aXRsZVwiIGlkPSdwcm9qZWN0VGl0bGUnPlxuICAgPGRpdj48YnV0dG9uIGlkPVwiYWRkXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTIzLCAyMzcsIDE1Nyk7XCI+QWRkPC9idXR0b24+XG4gICA8YnV0dG9uIGlkPVwiY2FuY2VsXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQ3LCA5NSwgOTUpXCI+Q2FuY2VsPC9idXR0b24+PC9kaXY+YDtcbiAgICB1c2VyUHJvamVjdHMuYXBwZW5kKHByb2plY3RQcm9tcHQpO1xuICAgIGFkZFByb2plY3RCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIGFkZCBvciBjYW5jZWwgYnV0dG9uc1xuICAgIGNvbnN0IGFkZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQnKTtcbiAgICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsJyk7XG5cbiAgICBhZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0VGl0bGUnKS52YWx1ZTtcbiAgICAgIGlmICh0aXRsZSA9PT0gdW5kZWZpbmVkIHx8IHRpdGxlID09PSAnJykge1xuICAgICAgICBhbGVydChcIlByb2plY3QgbmFtZSBjYW4ndCBiZSBlbXB0eVwiKTtcbiAgICAgIH1cbiAgICAgIGFkZFByb2plY3QodGl0bGUpO1xuICAgICAgY3JlYXRlUHJvamVjdEJ1dHRvbih0aXRsZSwgcHJvamVjdExpc3QubGVuZ3RoKTtcbiAgICAgIHJlbW92ZVByb2plY3RQcm9tcHQoKTtcbiAgICB9KTtcbiAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVQcm9qZWN0UHJvbXB0KTtcbiAgfVxuXG4gIC8vIEFERCBGVU5DVElPTlMgRk9SIEdFVFRJTkcgVE9ETyBJVEVNU1xuXG4gIGZ1bmN0aW9uIHJlbW92ZVRvZG9Qcm9tcHQoKSB7XG4gICAgY29uc3QgdG9kb1Byb21wdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvUHJvbXB0Jyk7XG4gICAgdG9kb1Byb21wdC5yZW1vdmUoKTtcbiAgICBjb25zdCBhZGRUb2RvQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRvZG9CdG4nKTtcbiAgICBhZGRUb2RvQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9XG5cbiAgLy8gYWRkIGEgdG9kbyB0YXNrIHRvIHRoZSBjdXJyZW50IHByb2plY3RcbiAgZnVuY3Rpb24gYWRkVG9kbygpIHtcbiAgICBjb25zdCB0b2RvUHJvbXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9Qcm9tcHQnKTtcbiAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrVGl0bGUnKS52YWx1ZTtcbiAgICBpZiAodGFza05hbWUgPT09IHVuZGVmaW5lZCB8fCB0YXNrTmFtZSA9PT0gJycgfHwgdGFza05hbWUgPT09IG51bGwpIHtcbiAgICAgIGFsZXJ0KCdUYXNrIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNyZWF0ZSB0b2RvIG9iamVjdFxuICAgICAgY29uc3QgdG9kbyA9IFRvZG8odGFza05hbWUpO1xuICAgICAgY3VycmVudFByb2plY3QuYXJyLnB1c2godG9kbyk7XG4gICAgICB0b2RvUHJvbXB0LnJlbW92ZSgpO1xuXG4gICAgICBjcmVhdGVUb2RvQ29tcG9uZW50KHRvZG8udGl0bGUsIHRvZG8uZHVlRGF0ZSwgY3VycmVudFByb2plY3QuYXJyLmxlbmd0aCAtIDEpO1xuICAgICAgY29uc3QgYWRkVG9kb0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvQnRuJyk7XG4gICAgICBhZGRUb2RvQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgc2F2ZUl0ZW0oY3VycmVudFByb2plY3QubmFtZSwgY3VycmVudFByb2plY3QpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21wdFRvZG8oKSB7XG4gICAgLy8gY3JlYXRlIHRvZG8gcHJvbXB0IGNvbXBvbmVudFxuICAgIGNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVG9kb0J0bicpO1xuICAgIGFkZFRvZG9CdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjb25zdCB0b2RvUHJvbXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdG9kb1Byb21wdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvZG9Qcm9tcHQnKTtcbiAgICB0b2RvUHJvbXB0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtcHJvbXB0Jyk7XG4gICAgdG9kb1Byb21wdC5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJcIiBwbGFjZWhvbGRlcj1cInRhc2sgdGl0bGVcIiBpZD0ndGFza1RpdGxlJz5cbiAgICA8ZGl2PjxidXR0b24gaWQ9XCJhZGRcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHJnYigxMjMsIDIzNywgMTU3KTtcIj5BZGQ8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGlkPVwiY2FuY2VsXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQ3LCA5NSwgOTUpXCI+Q2FuY2VsPC9idXR0b24+PC9kaXY+YDtcbiAgICBjb25zdCB0b2RvU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrbGlzdCcpO1xuICAgIHRvZG9TZWN0aW9uLmFwcGVuZENoaWxkKHRvZG9Qcm9tcHQpO1xuXG4gICAgY29uc3QgYWRkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZCcpO1xuICAgIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWwnKTtcblxuICAgIGFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFRvZG8pO1xuICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZVRvZG9Qcm9tcHQpO1xuICB9XG5cbiAgLy8gQUREIEVWRU5UIExJU1RFTkVSU1xuICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFByb2plY3RCdG4nKTtcbiAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByb21wdFByb2plY3QpO1xuXG4gIGNvbnN0IGFkZFRvZG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVG9kb0J0bicpO1xuICBhZGRUb2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJvbXB0VG9kbyk7XG5cbiAgY29uc3QgaW5ib3hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5ib3hCdG4nKTtcbiAgaW5ib3hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgc2hvd1Byb2pJbkRvbSgnSW5ib3gnKTtcbiAgICBjdXJyZW50UHJvamVjdCA9IGRlZmF1bHRQcm9qZWN0O1xuICAgIGxvYWRUb2RvcyhkZWZhdWx0UHJvamVjdC5hcnIpO1xuICB9KTtcblxuICAvLyBERUZBVUxUIEJFSEFWSU9VUiBXSEVOIFdJTkRPVyBMT0FEU1xuICBzaG93UHJvakluRG9tKCdJbmJveCcpO1xuICBjdXJyZW50UHJvamVjdCA9IGRlZmF1bHRQcm9qZWN0O1xuICBsb2FkVG9kb3MoZGVmYXVsdFByb2plY3QuYXJyKTtcblxuICBwcm9qZWN0TGlzdC5mb3JFYWNoKChwcm9qKSA9PiB7XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGNyZWF0ZVByb2plY3RCdXR0b24ocHJvai5uYW1lLCBjb3VudGVyKTtcbiAgICBjb3VudGVyICs9IDE7XG4gIH0pO1xufVxuIiwiaW1wb3J0IGxvYWRVaSBmcm9tICcuL21vZHVsZXMvZG9tc3R1ZmYnO1xuXG5sb2FkVWkoKTtcbiJdLCJuYW1lcyI6WyJ0aXRsZSIsImR1ZURhdGUiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiY29tcGxldGVkU3RhdHVzIiwiZWRpdFRpdGxlIiwibmV3VGl0bGUiLCJ0aGlzIiwiZWRpdERlc2NyaXB0aW9uIiwibmV3RGVzYyIsImVkaXRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZWRpdER1ZURhdGUiLCJuZXdEdWVEYXRlIiwiZWRpdENvbXBsZXRlZFN0YXR1cyIsIm5ld0NvbXBsZXRlZFN0YXR1cyIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwibG9jYWxlIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJwcm9qZWN0TmFtZSIsIm5hbWUiLCJhcnIiLCJhZGRUYXNrIiwidG9kbyIsInB1c2giLCJyZW1vdmVUYXNrIiwiaW5kZXgiLCJzcGxpY2UiLCJnZXRUb2RheVRhc2tzIiwiZmlsdGVyIiwidGFzayIsIm5vdyIsImlzVG9kYXkiLCJnZXRXZWVrbHlUYXNrcyIsImlzVGhpc1dlZWsiLCJwYXN0RHVlVGFza3MiLCJpc1Bhc3QiLCJzYXZlSXRlbSIsIml0ZW1OYW1lIiwiaXRlbU9iamVjdCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0SXRlbSIsInBhcnNlIiwiZGVmYXVsdFByb2plY3QiLCJjdXJyZW50UHJvamVjdCIsInByb2plY3RMaXN0IiwiY3JlYXRlVG9kb0NvbXBvbmVudCIsInRvZG9TZWN0aW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRvZG9JdGVtIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJwYXJlbnRFbGVtZW50IiwibnVtIiwiZGF0YXNldCIsInJlbW92ZSIsImRlbGV0ZVRvZG8iLCJ2YWx1ZSIsInN0eWxlIiwiZGlzcGxheSIsImlucHV0SXRlbSIsInF1ZXJ5U2VsZWN0b3IiLCJldmVudCIsImtleSIsImlucHV0IiwidW5kZWZpbmVkIiwiYWxlcnQiLCJpbm5lclRleHQiLCJ1cGRhdGVUb2RvIiwibG9hZFRvZG9zIiwiY291bnRlciIsImZvckVhY2giLCJlbGVtZW50Iiwic2hvd1Byb2pJbkRvbSIsImNyZWF0ZVByb2plY3RCdXR0b24iLCJpZCIsInVzZXJQcm9qZWN0cyIsInByb2plY3RCdXR0b24iLCJhcHBlbmRDaGlsZCIsInByb2plY3RCdG4iLCJyZW1vdmVJdGVtIiwic3RvcFByb3BhZ2F0aW9uIiwiZGVsZXRlUHJvamVjdCIsInJlbW92ZVByb2plY3RQcm9tcHQiLCJhZGRQcm9qZWN0QnRuIiwicmVtb3ZlVG9kb1Byb21wdCIsImFkZFRvZG8iLCJ0b2RvUHJvbXB0IiwidGFza05hbWUiLCJUb2RvIiwicHJvamVjdFByb21wdCIsImNhbmNlbCIsIm5ld1Byb2oiLCJhZGRQcm9qZWN0IiwicHJvaiIsImxvYWRVaSJdLCJzb3VyY2VSb290IjoiIn0=